{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/modules/patchClass.ts", "../src/modules/patchStyle.ts", "../src/modules/patchEvent.ts", "../src/modules/patchAttr.ts", "../src/patchProp.ts", "../src/index.ts"],
  "sourcesContent": ["//\u4E3B\u8981\u662F\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u589E\u5220\u6539\u67E5\r\nexport const nodeOps = {\r\n  //\u63D2\u5165\u5143\u7D20\r\n  insert(el, parent, anchor) {\r\n    //appendChild insertBefore()\r\n    //\u63D2\u5165\u5143\u7D20\u5230\u7236\u5143\u7D20\u4E2D\u67D0\u4E2A\u4F4D\u7F6E\u4E4B\u524D\r\n    parent.insertBefore(el, anchor || null);\r\n  },\r\n  //\u5220\u9664\u5143\u7D20\r\n  remove(el) {\r\n    const parent = el.parentNode;\r\n    if (parent) {\r\n      parent.removeChild(el);\r\n    }\r\n  },\r\n  //\u521B\u5EFA\u6587\u672C\u8282\u70B9\r\n  createText(text) {\r\n    return document.createTextNode(text);\r\n  },\r\n  //\u521B\u5EFA\u5143\u7D20\u8282\u70B9\r\n  createElement(type) {\r\n    //\u9700\u8981\u6E32\u67D3\u4EE5\u4E00\u4E2A\u5143\u7D20\r\n    return document.createElement(type);\r\n  },\r\n  //\u8BBE\u7F6E\u6587\u672C\u8282\u70B9\r\n  setText(el, text) {\r\n    el.textContent = text;\r\n  },\r\n  //\u521B\u5EFA\u6CE8\u91CA\u8282\u70B9\r\n  createComment: (text) => document.createComment(text),\r\n  //\u8BBE\u7F6E\u5143\u7D20\u7684\u6587\u672C\u5185\u5BB9\r\n  setElementText(el, text) {\r\n    el.textContent = text;\r\n  },\r\n  //\u83B7\u53D6\u7236\u8282\u70B9\r\n  parentNode(el) {\r\n    return el.parentNode;\r\n  },\r\n  //\u83B7\u53D6\u5144\u5F1F\u8282\u70B9\r\n  nextSibling(el) {\r\n    return el.nextSibling;\r\n  },\r\n};\r\n", "export default function patchClass(el, value) {\r\n  if (value == null) {\r\n    el.removeAttribute(\"class\");\r\n  } else {\r\n    el.className = value;\r\n  }\r\n}\r\n", "import { isString } from \"@vue/shared\";\r\n\r\nexport default function patchStyle(el, prevValue, nextValue) {\r\n  let style = el.style;\r\n  const isCssString = isString(nextValue);\r\n  if (nextValue && !isCssString) {\r\n    for (let key in nextValue) {\r\n      setStyle(style, key, nextValue[key]); //\u65B0\u6837\u5F0F\u8981\u5168\u90E8\u8986\u76D6\r\n    }\r\n  }\r\n\r\n  if (prevValue && !isCssString) {\r\n    for (let key in prevValue) {\r\n      //\u770B\u4EE5\u524D\u7684\u5C5E\u6027\u73B0\u5728\u6709\u6CA1\u6709\r\n      if (nextValue[key] == null) {\r\n        //\u5982\u679C\u4E4B\u524D\u7684\u5C5E\u6027\u73B0\u5728\u6CA1\u6709\u4E86\uFF0C\u9700\u8981\u5220\u9664\r\n        setStyle(style, key, \"\");\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setStyle(style: CSSStyleDeclaration, key: string, value: string) {\r\n  style[key] = value;\r\n}\r\n", "function createInvoker(value) {\r\n  const invoker = function (e) {\r\n    invoker.value(e); //\u901A\u8FC7\u66F4\u6539invoker.value\u6765\u5B9E\u73B0\u4E8B\u4EF6\u7684\u66F4\u65B0\r\n  };\r\n  invoker.value = value;\r\n  return invoker;\r\n}\r\n\r\nexport default function patchEvent(el, name, nextValue) {\r\n  //\u4E8B\u4EF6 el.addEventListener('click',fn)\r\n  //vue3\u4E2D\u4E8B\u4EF6\u7684\u8C03\u7528\r\n  const invokers = el._vei || (el._vei = {});\r\n  const eventName = name.slice(2).toLowerCase();\r\n\r\n  //\u5982\u679C\u5F53\u524D\u4E8B\u4EF6\u5B58\u5728\u7F13\u5B58\uFF0C\u5E76\u4E14\u5B58\u5728\u65B0\u7684\u4E8B\u4EF6\u884C\u4E3A\uFF0C\u5219\u5224\u5B9A\u4E3A\u66F4\u65B0\u64CD\u4F5C\u3002\u76F4\u63A5\u66F4\u65B0 invoker \u7684 value \u5373\u53EF\r\n  const existingInvokers = invokers[name]; //\u662F\u5426\u5B58\u5728\u540C\u540D\u7684\u4E8B\u4EF6\u7ED1\u5B9A\r\n\r\n  //\u540C\u540D\u4E8B\u4EF6\u6362\u7ED1 \u5047\u5982\u5C06hander1\u6362\u7ED1\u4E3Ahander2 \u4E4B\u524DexistingInvoker.value = handler1\r\n  //\u5982\u679C\u5B58\u5728\u540C\u540D\u7684\u4E8B\u4EF6\u7ED1\u5B9A\uFF0C\u76F4\u63A5\u66F4\u65B0value\r\n  if (nextValue && existingInvokers) {\r\n    return (existingInvokers.value = nextValue);\r\n  }\r\n\r\n  if (nextValue) {\r\n    // // 1. \u9996\u5148\u521B\u5EFA invoker \u51FD\u6570\r\n    // const newInvoker = createInvoker(nextValue);\r\n\r\n    // // 2. \u5C06\u8FD9\u4E2A\u51FD\u6570\u8D4B\u503C\u7ED9 invokers \u5BF9\u8C61\u7684 name \u5C5E\u6027\r\n    // invokers[name] = newInvoker;\r\n\r\n    // // 3. \u540C\u65F6\u5C06\u8FD9\u4E2A\u51FD\u6570\u8D4B\u503C\u7ED9 invoker \u5E38\u91CF\r\n    // const invoker = newInvoker;\r\n\r\n    //invokers\u662F\u4E8B\u4EF6\u7684\u7F13\u5B58 \u800Cinvoker\u662F\u4E8B\u4EF6\u7684\u8C03\u7528\u51FD\u6570\r\n    const invoker = (invokers[name] = createInvoker(nextValue)); // \u521B\u5EFA\u4E00\u4E2A\u8C03\u7528\u51FD\u6570,\u5E76\u4E14\u5185\u90E8\u4F1A\u6267\u884CnextValue\r\n    el.addEventListener(eventName, invoker);\r\n  }\r\n\r\n  //\u5982\u679C\u6CA1\u4F20\u5165nextValue\uFF0C\u8BF4\u660E\u8981\u5220\u9664\u4E8B\u4EF6\r\n  if (existingInvokers) {\r\n    el.removeEventListener(eventName, existingInvokers);\r\n    invokers[name] = undefined;\r\n  }\r\n}\r\n", "export default function patchAttr(el, key, value) {\r\n  if (value) {\r\n    el.setAttribute(key, value);\r\n  } else {\r\n    el.removeAttribute(key);\r\n  }\r\n}\r\n", "//diff\u7B97\u6CD5\r\nimport patchClass from \"./modules/patchClass\";\r\nimport patchStyle from \"./modules/patchStyle\";\r\nimport patchEvent from \"./modules/patchEvent\";\r\nimport patchAttr from \"./modules/patchAttr\";\r\n\r\n//onclick = ()=>{fn()} \u901A\u8FC7\u6539\u8FD9\u4E2A\u51FD\u6570\u5185\u90E8\u7684value\u6765\u5B9E\u73B0\u4E8B\u4EF6\u7684\u66F4\u65B0\r\n//\u521B\u5EFA\u4E00\u4E2A\u8C03\u7528\u51FD\u6570\r\n\r\nexport default function patchProp(el, key, prevValue, nextValue) {\r\n  if (key === \"class\") {\r\n    return patchClass(el, nextValue);\r\n  } else if (key === \"style\") {\r\n    return patchStyle(el, prevValue, nextValue);\r\n  } else if (/on[^a-z]/.test(key)) {\r\n    //\u4E8B\u4EF6 el.addEventListener('click',fn)\r\n    return patchEvent(el, key, nextValue);\r\n  } else if (shouldSetAsProp(el, key)) {\r\n    // \u901A\u8FC7 DOM Properties \u6307\u5B9A\r\n    patchDOMProp(el, key, nextValue);\r\n  } else {\r\n    // \u5176\u4ED6\u5C5E\u6027\r\n    patchAttr(el, key, nextValue);\r\n  }\r\n}\r\n\r\nfunction shouldSetAsProp(el: Element, key: string) {\r\n  // #1787, #2840 \u8868\u5355\u5143\u7D20\u7684\u8868\u5355\u5C5E\u6027\u662F\u53EA\u8BFB\u7684\uFF0C\u5FC5\u987B\u8BBE\u7F6E\u4E3A\u5C5E\u6027 attribute\r\n  if (key === \"form\") {\r\n    return false;\r\n  }\r\n\r\n  // #1526 <input list> \u5FC5\u987B\u8BBE\u7F6E\u4E3A\u5C5E\u6027 attribute\r\n  if (key === \"list\" && el.tagName === \"INPUT\") {\r\n    return false;\r\n  }\r\n\r\n  // #2766 <textarea type> \u5FC5\u987B\u8BBE\u7F6E\u4E3A\u5C5E\u6027 attribute\r\n  if (key === \"type\" && el.tagName === \"TEXTAREA\") {\r\n    return false;\r\n  }\r\n\r\n  return key in el;\r\n}\r\n\r\nexport function patchDOMProp(el: any, key: string, value: any) {\r\n  try {\r\n    el[key] = value;\r\n  } catch (e: any) {}\r\n}\r\n\r\n// export default function patchProp(el, key, prevValue, nextValue) {\r\n//   if (key === \"class\") {\r\n//     return patchClass(el, nextValue);\r\n//   } else if (key === \"style\") {\r\n//     return patchStyle(el, prevValue, nextValue);\r\n//   } else if (/on[^a-z]/.test(key)) {\r\n//     //\u4E8B\u4EF6 el.addEventListener('click',fn)\r\n//     return patchEvent(el, key, nextValue);\r\n//   } else {\r\n//     return patchAttr(el, key, nextValue);\r\n//   }\r\n// }\r\n", "// export * from '@vue/shared'\r\n\r\nimport { nodeOps } from \"./nodeOps\";\r\nimport patchProp from \"./patchProp\"; // \u9ED8\u8BA4\u5BFC\u5165\r\nimport { createRenderer } from \"@vue/runtime-core\";\r\n\r\n// \u5C06\u8282\u70B9\u64CD\u4F5C\u548C\u5C5E\u6027\u64CD\u4F5C\u5408\u5E76\r\nconst rendererOptions = Object.assign({ patchProp }, nodeOps);\r\n\r\nlet renderer;\r\nfunction ensureRenderer() {\r\n  return renderer || (renderer = createRenderer(rendererOptions));\r\n}\r\n\r\nexport const render = (...args) => {\r\n  ensureRenderer().render(...args);\r\n};\r\n\r\n// \u660E\u786E\u5BFC\u51FA patchProp\r\nexport { patchProp, rendererOptions };\r\n\r\nexport * from \"@vue/runtime-core\";\r\n\r\n// \u4E3A\u4E86\u8BA9\u9875\u9762\u53EF\u4EE5\u76F4\u63A5\u4ECE runtime-dom \u5BFC\u5165 reactive/shared\uFF0C\r\n// \u91CD\u65B0\u5BFC\u51FA\u8FD9\u4E24\u4E2A\u5305\u7684\u63A5\u53E3\uFF0C\u4FDD\u8BC1\u8FD0\u884C\u65F6\u53EA\u52A0\u8F7D\u4E00\u4EFD\u5B9E\u73B0\u3002\r\nexport * from \"@vue/reactivity\";\r\nexport * from \"@vue/shared\";\r\n// explicitly export isObject from @vue/reactivity to resolve naming conflict\r\nexport { isObject } from \"@vue/reactivity\";\r\n"],
  "mappings": ";AACO,IAAM,UAAU;AAAA;AAAA,EAErB,OAAO,IAAI,QAAQ,QAAQ;AAGzB,WAAO,aAAa,IAAI,UAAU,IAAI;AAAA,EACxC;AAAA;AAAA,EAEA,OAAO,IAAI;AACT,UAAM,SAAS,GAAG;AAClB,QAAI,QAAQ;AACV,aAAO,YAAY,EAAE;AAAA,IACvB;AAAA,EACF;AAAA;AAAA,EAEA,WAAW,MAAM;AACf,WAAO,SAAS,eAAe,IAAI;AAAA,EACrC;AAAA;AAAA,EAEA,cAAc,MAAM;AAElB,WAAO,SAAS,cAAc,IAAI;AAAA,EACpC;AAAA;AAAA,EAEA,QAAQ,IAAI,MAAM;AAChB,OAAG,cAAc;AAAA,EACnB;AAAA;AAAA,EAEA,eAAe,CAAC,SAAS,SAAS,cAAc,IAAI;AAAA;AAAA,EAEpD,eAAe,IAAI,MAAM;AACvB,OAAG,cAAc;AAAA,EACnB;AAAA;AAAA,EAEA,WAAW,IAAI;AACb,WAAO,GAAG;AAAA,EACZ;AAAA;AAAA,EAEA,YAAY,IAAI;AACd,WAAO,GAAG;AAAA,EACZ;AACF;;;AC1Ce,SAAR,WAA4B,IAAI,OAAO;AAC5C,MAAI,SAAS,MAAM;AACjB,OAAG,gBAAgB,OAAO;AAAA,EAC5B,OAAO;AACL,OAAG,YAAY;AAAA,EACjB;AACF;;;ACNA,SAAS,gBAAgB;AAEV,SAAR,WAA4B,IAAI,WAAW,WAAW;AAC3D,MAAI,QAAQ,GAAG;AACf,QAAM,cAAc,SAAS,SAAS;AACtC,MAAI,aAAa,CAAC,aAAa;AAC7B,aAAS,OAAO,WAAW;AACzB,eAAS,OAAO,KAAK,UAAU,GAAG,CAAC;AAAA,IACrC;AAAA,EACF;AAEA,MAAI,aAAa,CAAC,aAAa;AAC7B,aAAS,OAAO,WAAW;AAEzB,UAAI,UAAU,GAAG,KAAK,MAAM;AAE1B,iBAAS,OAAO,KAAK,EAAE;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AACF;AAEA,SAAS,SAAS,OAA4B,KAAa,OAAe;AACxE,QAAM,GAAG,IAAI;AACf;;;ACxBA,SAAS,cAAc,OAAO;AAC5B,QAAM,UAAU,SAAU,GAAG;AAC3B,YAAQ,MAAM,CAAC;AAAA,EACjB;AACA,UAAQ,QAAQ;AAChB,SAAO;AACT;AAEe,SAAR,WAA4B,IAAI,MAAM,WAAW;AAGtD,QAAM,WAAW,GAAG,SAAS,GAAG,OAAO,CAAC;AACxC,QAAM,YAAY,KAAK,MAAM,CAAC,EAAE,YAAY;AAG5C,QAAM,mBAAmB,SAAS,IAAI;AAItC,MAAI,aAAa,kBAAkB;AACjC,WAAQ,iBAAiB,QAAQ;AAAA,EACnC;AAEA,MAAI,WAAW;AAWb,UAAM,UAAW,SAAS,IAAI,IAAI,cAAc,SAAS;AACzD,OAAG,iBAAiB,WAAW,OAAO;AAAA,EACxC;AAGA,MAAI,kBAAkB;AACpB,OAAG,oBAAoB,WAAW,gBAAgB;AAClD,aAAS,IAAI,IAAI;AAAA,EACnB;AACF;;;AC3Ce,SAAR,UAA2B,IAAI,KAAK,OAAO;AAChD,MAAI,OAAO;AACT,OAAG,aAAa,KAAK,KAAK;AAAA,EAC5B,OAAO;AACL,OAAG,gBAAgB,GAAG;AAAA,EACxB;AACF;;;ACGe,SAAR,UAA2B,IAAI,KAAK,WAAW,WAAW;AAC/D,MAAI,QAAQ,SAAS;AACnB,WAAO,WAAW,IAAI,SAAS;AAAA,EACjC,WAAW,QAAQ,SAAS;AAC1B,WAAO,WAAW,IAAI,WAAW,SAAS;AAAA,EAC5C,WAAW,WAAW,KAAK,GAAG,GAAG;AAE/B,WAAO,WAAW,IAAI,KAAK,SAAS;AAAA,EACtC,WAAW,gBAAgB,IAAI,GAAG,GAAG;AAEnC,iBAAa,IAAI,KAAK,SAAS;AAAA,EACjC,OAAO;AAEL,cAAU,IAAI,KAAK,SAAS;AAAA,EAC9B;AACF;AAEA,SAAS,gBAAgB,IAAa,KAAa;AAEjD,MAAI,QAAQ,QAAQ;AAClB,WAAO;AAAA,EACT;AAGA,MAAI,QAAQ,UAAU,GAAG,YAAY,SAAS;AAC5C,WAAO;AAAA,EACT;AAGA,MAAI,QAAQ,UAAU,GAAG,YAAY,YAAY;AAC/C,WAAO;AAAA,EACT;AAEA,SAAO,OAAO;AAChB;AAEO,SAAS,aAAa,IAAS,KAAa,OAAY;AAC7D,MAAI;AACF,OAAG,GAAG,IAAI;AAAA,EACZ,SAAS,GAAQ;AAAA,EAAC;AACpB;;;AC7CA,SAAS,sBAAsB;AAiB/B,cAAc;AAId,cAAc;AACd,cAAc;AAEd,SAAS,gBAAgB;AArBzB,IAAM,kBAAkB,OAAO,OAAO,EAAE,UAAU,GAAG,OAAO;AAE5D,IAAI;AACJ,SAAS,iBAAiB;AACxB,SAAO,aAAa,WAAW,eAAe,eAAe;AAC/D;AAEO,IAAM,SAAS,IAAI,SAAS;AACjC,iBAAe,EAAE,OAAO,GAAG,IAAI;AACjC;",
  "names": []
}
