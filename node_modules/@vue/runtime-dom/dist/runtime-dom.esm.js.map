{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/modules/patchClass.ts", "../src/modules/patchStyle.ts", "../src/modules/patchEvent.ts", "../src/modules/patchAttr.ts", "../src/patchProp.ts", "../../runtime-core/src/index.ts", "../src/index.ts"],
  "sourcesContent": ["//\u4E3B\u8981\u662F\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u589E\u5220\u6539\u67E5\r\nexport const nodeOps = {\r\n  //\u63D2\u5165\u5143\u7D20\r\n  insert(el, parent, anchor) {\r\n    //appendChild insertBefore()\r\n    //\u63D2\u5165\u5143\u7D20\u5230\u7236\u5143\u7D20\u4E2D\u67D0\u4E2A\u4F4D\u7F6E\u4E4B\u524D\r\n    parent.insertBefore(el, anchor || null);\r\n  },\r\n  //\u5220\u9664\u5143\u7D20\r\n  remove(el) {\r\n    const parent = el.parentNode;\r\n    if (parent) {\r\n      parent.removeChild(el);\r\n    }\r\n  },\r\n  //\u521B\u5EFA\u6587\u672C\u8282\u70B9\r\n  createText(text) {\r\n    return document.createTextNode(text);\r\n  },\r\n  //\u521B\u5EFA\u5143\u7D20\u8282\u70B9\r\n  createElement(type) {\r\n    //\u9700\u8981\u6E32\u67D3\u4EE5\u4E00\u4E2A\u5143\u7D20\r\n    return document.createElement(\"h1\");\r\n  },\r\n  //\u8BBE\u7F6E\u6587\u672C\u8282\u70B9\r\n  setText(el, text) {\r\n    el.textContent = text;\r\n  },\r\n  //\u8BBE\u7F6E\u5143\u7D20\u7684\u6587\u672C\u5185\u5BB9\r\n  setElementText(el, text) {\r\n    el.textContent = text;\r\n  },\r\n  //\u83B7\u53D6\u7236\u8282\u70B9\r\n  parentNode(el) {\r\n    return el.parentNode;\r\n  },\r\n  //\u83B7\u53D6\u5144\u5F1F\u8282\u70B9\r\n  nextSibling(el) {\r\n    return el.nextSibling;\r\n  },\r\n};\r\n", "export default function patchClass(el, value) {\r\n  if (value == null) {\r\n    el.removeAttribute(\"class\");\r\n  } else {\r\n    el.className = value;\r\n  }\r\n}\r\n", "export default function patchStyle(el, prevValue, nextValue) {\r\n  let style = el.style;\r\n  for (let key in nextValue) {\r\n    style[key] = nextValue[key]; //\u65B0\u6837\u5F0F\u8981\u5168\u90E8\u8986\u76D6\r\n  }\r\n  if (prevValue) {\r\n    for (let key in prevValue) {\r\n      //\u770B\u4EE5\u524D\u7684\u5C5E\u6027\u73B0\u5728\u6709\u6CA1\u6709\r\n      if (nextValue[key] == null) {\r\n        //\u5982\u679C\u4E4B\u524D\u7684\u5C5E\u6027\u73B0\u5728\u6CA1\u6709\u4E86\uFF0C\u9700\u8981\u5220\u9664\r\n        style[key] = null;\r\n      }\r\n    }\r\n  }\r\n}\r\n", "function createInvoker(value) {\r\n  const invoker = function (e) {\r\n    invoker.value(e); //\u901A\u8FC7\u66F4\u6539invoker.value\u6765\u5B9E\u73B0\u4E8B\u4EF6\u7684\u66F4\u65B0\r\n  };\r\n  invoker.value = value;\r\n  return invoker;\r\n}\r\n\r\nexport default function patchEvent(el, name, nextValue) {\r\n  //\u4E8B\u4EF6 el.addEventListener('click',fn)\r\n  //vue3\u4E2D\u4E8B\u4EF6\u7684\u8C03\u7528\r\n  const invokers = el._vei || (el._vei = {});\r\n  const eventName = name.slice(2).toLowerCase();\r\n\r\n  const existingInvokers = invokers[name]; //\u662F\u5426\u5B58\u5728\u540C\u540D\u7684\u4E8B\u4EF6\u7ED1\u5B9A\r\n\r\n  //\u540C\u540D\u4E8B\u4EF6\u6362\u7ED1 \u5047\u5982\u5C06hander1\u6362\u7ED1\u4E3Ahander2 \u4E4B\u524DexistingInvoker.value = handler1\r\n  //\u5982\u679C\u5B58\u5728\u540C\u540D\u7684\u4E8B\u4EF6\u7ED1\u5B9A\uFF0C\u76F4\u63A5\u66F4\u65B0value\r\n  if (nextValue && existingInvokers) {\r\n    return (existingInvokers.value = nextValue);\r\n  }\r\n\r\n  if (nextValue) {\r\n    // // 1. \u9996\u5148\u521B\u5EFA invoker \u51FD\u6570\r\n    // const newInvoker = createInvoker(nextValue);\r\n\r\n    // // 2. \u5C06\u8FD9\u4E2A\u51FD\u6570\u8D4B\u503C\u7ED9 invokers \u5BF9\u8C61\u7684 name \u5C5E\u6027\r\n    // invokers[name] = newInvoker;\r\n\r\n    // // 3. \u540C\u65F6\u5C06\u8FD9\u4E2A\u51FD\u6570\u8D4B\u503C\u7ED9 invoker \u5E38\u91CF\r\n    // const invoker = newInvoker;\r\n\r\n    //invokers\u662F\u4E8B\u4EF6\u7684\u7F13\u5B58 \u800Cinvoker\u662F\u4E8B\u4EF6\u7684\u8C03\u7528\u51FD\u6570\r\n    const invoker = (invokers[name] = createInvoker(nextValue)); // \u521B\u5EFA\u4E00\u4E2A\u8C03\u7528\u51FD\u6570,\u5E76\u4E14\u5185\u90E8\u4F1A\u6267\u884CnextValue\r\n    el.addEventListener(eventName, invoker);\r\n  }\r\n\r\n  //\u5982\u679C\u6CA1\u4F20\u5165nextValue\uFF0C\u8BF4\u660E\u8981\u5220\u9664\u4E8B\u4EF6\r\n  if (existingInvokers) {\r\n    el.removeEventListener(eventName, existingInvokers);\r\n    invokers[name] = undefined;\r\n  }\r\n}\r\n", "export default function patchAttr(el, key, value) {\r\n  if (value) {\r\n    el.setAttribute(key, value);\r\n  } else {\r\n    el.removeAttribute(key);\r\n  }\r\n}\r\n", "//diff\u7B97\u6CD5\r\nimport patchClass from \"./modules/patchClass\";\r\nimport patchStyle from \"./modules/patchStyle\";\r\nimport patchEvent from \"./modules/patchEvent\";\r\nimport patchAttr from \"./modules/patchAttr\";\r\n\r\n//onclick = ()=>{fn()} \u901A\u8FC7\u6539\u8FD9\u4E2A\u51FD\u6570\u5185\u90E8\u7684value\u6765\u5B9E\u73B0\u4E8B\u4EF6\u7684\u66F4\u65B0\r\n//\u521B\u5EFA\u4E00\u4E2A\u8C03\u7528\u51FD\u6570\r\n\r\nexport default function patchProp(el, key, prevValue, nextValue) {\r\n  if (key === \"class\") {\r\n    return patchClass(el, nextValue);\r\n  } else if (key === \"style\") {\r\n    return patchStyle(el, prevValue, nextValue);\r\n  } else if (/on[^a-z]/.test(key)) {\r\n    //\u4E8B\u4EF6 el.addEventListener('click',fn)\r\n    return patchEvent(el, key, nextValue);\r\n  } else {\r\n    return patchAttr(el, key, nextValue);\r\n  }\r\n}\r\n", "import { ShapeFlags } from \"@vue/shared\";\r\n\r\nexport function createRenderer(rendererOptions) {\r\n  //core \u4E0D\u5173\u5FC3\u5982\u4F55\u6E32\u67D3\r\n\r\n  const {\r\n    insert: hostInsert,\r\n    remove: hostRemove,\r\n    patchProp: hostPatchProp,\r\n    createElement: hostCreateElement,\r\n    createText: hostCreateText,\r\n    setText: hostSetText,\r\n    setElementText: hostSetElementText,\r\n    parentNode: hostParentNode,\r\n    nextSibling: hostNextSibling,\r\n  } = rendererOptions;\r\n\r\n  //\u6302\u8F7D\u5B50\u8282\u70B9\r\n  const mountChildren = (children, container) => {\r\n    for (let i = 0; i < children.length; i++) {\r\n      //\u53EF\u80FD\u662F\u7EAF\u6587\u672C \u8FDB\u884C\u9012\u5F52\u8BBE\u7F6E\u5185\u90E8\u5185\u5BB9\r\n      patch(null, children[i], container);\r\n    }\r\n  };\r\n\r\n  //\u6302\u8F7D\u5143\u7D20\r\n  const mountElement = (vnode, container) => {\r\n    //\u4ECEvnode\u4E2D\u83B7\u53D6\u5173\u952E\u5143\u7D20\r\n    const { type, children, props, shapeFlag } = vnode;\r\n    console.log(props, \"props\");\r\n    console.log(type, \"type\"); //h1 //\u6807\u7B7E\u7C7B\u578B\r\n\r\n    //\u6839\u636E\u6807\u7B7E\u7C7B\u578B\u521B\u5EFA\u771F\u5B9E\u8282\u70B9\r\n    const el = hostCreateElement(type);\r\n    //\u8BBE\u7F6E\u5C5E\u6027\r\n    if (props) {\r\n      for (const key in props) {\r\n        hostPatchProp(el, key, null, props[key]);\r\n      }\r\n    }\r\n    console.log(vnode);\r\n    //\u6839\u636E\u7C7B\u578B \u5904\u7406\u5B50\u8282\u70B9\r\n    // hostSetElementText(el, children);\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      // \u6587\u672C\u5B50\u8282\u70B9 \u5982\u679C\u4F20\u7684\u662F\u6587\u672C \u5219\u76F4\u63A5\u5C06children\u4E5F\u5C31\u662F\u6587\u672C\u5185\u5BB9\u8BBE\u7F6E\u5230el\u4E0A\r\n      hostSetElementText(el, children);\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      // \u6570\u7EC4\u5B50\u8282\u70B9 \u5982\u679C\u4F20\u7684\u662F\u6570\u7EC4 \u5219\u904D\u5386\u6570\u7EC4\r\n      mountChildren(children, el);\r\n    }\r\n    hostInsert(el, container);\r\n  };\r\n\r\n  const patch = (n1, n2, container) => {\r\n    if (n1 == n2) {\r\n      return;\r\n    }\r\n    //\u521D\u59CB\u5316\r\n    if (n1 === null) {\r\n      mountElement(n2, container);\r\n    }\r\n  };\r\n\r\n  //\u591A\u6B21\u8C03\u7528render\uFF0C\u9700\u8981\u5BF9\u6BD4\r\n  const render = (vnode, container) => {\r\n    //\u5C06\u865A\u62DF\u8282\u70B9\u6E32\u67D3\u6210\u771F\u5B9E\u8282\u70B9\r\n    //_vnode\u7B2C\u4E00\u6B21\u4E3Anull\uFF0C\u4E4B\u540E\u4E3A\u4E0A\u4E00\u6B21\u7684\u865A\u62DF\u8282\u70B9\r\n    patch(container._vnode || null, vnode, container);\r\n\r\n    container._vnode = vnode;\r\n  };\r\n  return {\r\n    render,\r\n  };\r\n}\r\n", "// export * from '@vue/shared'\r\n\r\nimport { nodeOps } from \"./nodeOps\";\r\nimport patchProp from \"./patchProp\";\r\n\r\nimport { createRenderer } from \"@vue/runtime-core\";\r\n\r\n//\u5C06\u8282\u70B9\u64CD\u4F5C\u548C\u5C5E\u6027\u64CD\u4F5C\u5408\u5E76\r\nconst rendererOptions = Object.assign({ patchProp }, nodeOps);\r\n\r\nexport const render = (vnode, container) => {\r\n  return createRenderer(rendererOptions).render(vnode, container);\r\n};\r\n\r\nexport { rendererOptions };\r\n\r\nexport * from \"@vue/runtime-core\";\r\n\r\n//runtime-dom -> runtime-core->reactivity\r\n"],
  "mappings": ";AACO,IAAM,UAAU;AAAA;AAAA,EAErB,OAAO,IAAI,QAAQ,QAAQ;AAGzB,WAAO,aAAa,IAAI,UAAU,IAAI;AAAA,EACxC;AAAA;AAAA,EAEA,OAAO,IAAI;AACT,UAAM,SAAS,GAAG;AAClB,QAAI,QAAQ;AACV,aAAO,YAAY,EAAE;AAAA,IACvB;AAAA,EACF;AAAA;AAAA,EAEA,WAAW,MAAM;AACf,WAAO,SAAS,eAAe,IAAI;AAAA,EACrC;AAAA;AAAA,EAEA,cAAc,MAAM;AAElB,WAAO,SAAS,cAAc,IAAI;AAAA,EACpC;AAAA;AAAA,EAEA,QAAQ,IAAI,MAAM;AAChB,OAAG,cAAc;AAAA,EACnB;AAAA;AAAA,EAEA,eAAe,IAAI,MAAM;AACvB,OAAG,cAAc;AAAA,EACnB;AAAA;AAAA,EAEA,WAAW,IAAI;AACb,WAAO,GAAG;AAAA,EACZ;AAAA;AAAA,EAEA,YAAY,IAAI;AACd,WAAO,GAAG;AAAA,EACZ;AACF;;;ACxCe,SAAR,WAA4B,IAAI,OAAO;AAC5C,MAAI,SAAS,MAAM;AACjB,OAAG,gBAAgB,OAAO;AAAA,EAC5B,OAAO;AACL,OAAG,YAAY;AAAA,EACjB;AACF;;;ACNe,SAAR,WAA4B,IAAI,WAAW,WAAW;AAC3D,MAAI,QAAQ,GAAG;AACf,WAAS,OAAO,WAAW;AACzB,UAAM,GAAG,IAAI,UAAU,GAAG;AAAA,EAC5B;AACA,MAAI,WAAW;AACb,aAAS,OAAO,WAAW;AAEzB,UAAI,UAAU,GAAG,KAAK,MAAM;AAE1B,cAAM,GAAG,IAAI;AAAA,MACf;AAAA,IACF;AAAA,EACF;AACF;;;ACdA,SAAS,cAAc,OAAO;AAC5B,QAAM,UAAU,SAAU,GAAG;AAC3B,YAAQ,MAAM,CAAC;AAAA,EACjB;AACA,UAAQ,QAAQ;AAChB,SAAO;AACT;AAEe,SAAR,WAA4B,IAAI,MAAM,WAAW;AAGtD,QAAM,WAAW,GAAG,SAAS,GAAG,OAAO,CAAC;AACxC,QAAM,YAAY,KAAK,MAAM,CAAC,EAAE,YAAY;AAE5C,QAAM,mBAAmB,SAAS,IAAI;AAItC,MAAI,aAAa,kBAAkB;AACjC,WAAQ,iBAAiB,QAAQ;AAAA,EACnC;AAEA,MAAI,WAAW;AAWb,UAAM,UAAW,SAAS,IAAI,IAAI,cAAc,SAAS;AACzD,OAAG,iBAAiB,WAAW,OAAO;AAAA,EACxC;AAGA,MAAI,kBAAkB;AACpB,OAAG,oBAAoB,WAAW,gBAAgB;AAClD,aAAS,IAAI,IAAI;AAAA,EACnB;AACF;;;AC1Ce,SAAR,UAA2B,IAAI,KAAK,OAAO;AAChD,MAAI,OAAO;AACT,OAAG,aAAa,KAAK,KAAK;AAAA,EAC5B,OAAO;AACL,OAAG,gBAAgB,GAAG;AAAA,EACxB;AACF;;;ACGe,SAAR,UAA2B,IAAI,KAAK,WAAW,WAAW;AAC/D,MAAI,QAAQ,SAAS;AACnB,WAAO,WAAW,IAAI,SAAS;AAAA,EACjC,WAAW,QAAQ,SAAS;AAC1B,WAAO,WAAW,IAAI,WAAW,SAAS;AAAA,EAC5C,WAAW,WAAW,KAAK,GAAG,GAAG;AAE/B,WAAO,WAAW,IAAI,KAAK,SAAS;AAAA,EACtC,OAAO;AACL,WAAO,UAAU,IAAI,KAAK,SAAS;AAAA,EACrC;AACF;;;AClBO,SAAS,eAAeA,kBAAiB;AAG9C,QAAM;AAAA,IACJ,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,WAAW;AAAA,IACX,eAAe;AAAA,IACf,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,aAAa;AAAA,EACf,IAAIA;AAGJ,QAAM,gBAAgB,CAAC,UAAU,cAAc;AAC7C,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AAExC,YAAM,MAAM,SAAS,CAAC,GAAG,SAAS;AAAA,IACpC;AAAA,EACF;AAGA,QAAM,eAAe,CAAC,OAAO,cAAc;AAEzC,UAAM,EAAE,MAAM,UAAU,OAAO,UAAU,IAAI;AAC7C,YAAQ,IAAI,OAAO,OAAO;AAC1B,YAAQ,IAAI,MAAM,MAAM;AAGxB,UAAM,KAAK,kBAAkB,IAAI;AAEjC,QAAI,OAAO;AACT,iBAAW,OAAO,OAAO;AACvB,sBAAc,IAAI,KAAK,MAAM,MAAM,GAAG,CAAC;AAAA,MACzC;AAAA,IACF;AACA,YAAQ,IAAI,KAAK;AAGjB,QAAI,mCAAsC;AAExC,yBAAmB,IAAI,QAAQ;AAAA,IACjC,WAAW,qCAAuC;AAEhD,oBAAc,UAAU,EAAE;AAAA,IAC5B;AACA,eAAW,IAAI,SAAS;AAAA,EAC1B;AAEA,QAAM,QAAQ,CAAC,IAAI,IAAI,cAAc;AACnC,QAAI,MAAM,IAAI;AACZ;AAAA,IACF;AAEA,QAAI,OAAO,MAAM;AACf,mBAAa,IAAI,SAAS;AAAA,IAC5B;AAAA,EACF;AAGA,QAAMC,UAAS,CAAC,OAAO,cAAc;AAGnC,UAAM,UAAU,UAAU,MAAM,OAAO,SAAS;AAEhD,cAAU,SAAS;AAAA,EACrB;AACA,SAAO;AAAA,IACL,QAAAA;AAAA,EACF;AACF;;;AClEA,IAAM,kBAAkB,OAAO,OAAO,EAAE,UAAU,GAAG,OAAO;AAErD,IAAM,SAAS,CAAC,OAAO,cAAc;AAC1C,SAAO,eAAe,eAAe,EAAE,OAAO,OAAO,SAAS;AAChE;",
  "names": ["rendererOptions", "render"]
}
