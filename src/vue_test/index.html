<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app"></div>
    <script>
      //创建
      const VNode = {
        type: "div",
        children: "hello world",
      };

      const VNode2 = {
        type: "div",
        children: "patch render",
      };
      function render(oldVNode, newVNode, container) {
        if (!oldVNode) {
          mount(newVNode, container);
        } else {
          path(oldVNode, newVNode, container);
        }
      }
      //挂载函数
      function mount(VNode, container) {
        //创建元素
        const el = document.createElement(VNode.type);
        //设置属性
        el.innerHTML = VNode.children;
        //将ele作为子元素添加到container中
        container.appendChild(el);
      }

      //取消挂载
      function unmount(VNode, container) {
        container.innerHTML = "";
      }
      //patch 更新函数
      function path(oldVNode, newVNode, container) {
        unmount(oldVNode, container);
        mount(newVNode, container);
      }
      render(null, VNode, document.getElementById("app"));

      setTimeout(() => {
        render(VNode, VNode2, document.getElementById("app"));
      }, 2000);
    </script>
  </body>
</html>
